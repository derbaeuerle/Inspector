<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset=utf-8>
<title>Inspector Test</title>
<meta name="viewport" content="width=800, initial-scale=0.5" />
<script type="text/javascript" src="js/inspector.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<style type="text/css">
    html, body {
        width: 640px;
    }
    #compass {
        position:absolute;
        top:100px;
        left:350px;
        display:block;
        background:url('img/compass.png') top left no-repeat;
        width:300px;
        height:300px;
    }
    #needle {
        position:absolute;
        top:100px;
        left:350px;
        display:block;
        background:url('img/needle.png') top left no-repeat;
        width:300px;
        height:300px;
    }
</style>
</head>
<body>
    <button id="start" href="#" onclick="listenOrientation();">Start Compass</button><br/>
    <button id="stop" href="#" onclick="unlistenOrientation();">Stop Compass</button><br/>
    Magnetic: <div id="magnetic"></div><br/>
    Degree: <div id="degree"></div>Â°<br/>
    <div id="compass"></div>
    <div id="needle"></div>
    <div id="console"></div><br/>
    <script type="text/javascript">
        $console = $('#console');
        $compass = $('#compass');
        $console = $('#console');
        $deg = $('#degree');
        var ori;
        listenOrientation = function() {
            if(!ori) {
                inspector.destroyListeners();
                ori = inspector.listen(inspector.gadgets.ORIENTATION, {}, function(data) {
                    if(data[0]) {
                        deg = -1 * parseInt(data[0], 10);
                        $compass.css({
                            '-webkit-transform': 'rotate(' + deg + 'deg)',
                            '-o-transform': 'rotate(' + deg + 'deg)',
                            '-ms-transform': 'rotate(' + deg + 'deg)',
                            'transform': 'rotate(' + deg + 'deg)'
                        });
                        $deg.html(deg);
                    }
                }, function(error) {
                    inspector.logger(error);
                });
            }
        }
        unlistenOrientation = function() {
            inspector.unlisten(inspector.gadgets.ORIENTATION, ori);
        }
        inspector.logger = function(msg) {
            $console.html(msg);
        }
        $(document).ready(function(e) {
            $('#start').click();
        });
    </script>
</body>
</html>
