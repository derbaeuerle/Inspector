<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset=utf-8>
<title>Inspector Test</title>
<meta name="viewport" content="width=480, initial-scale=1.0" />
<script type="text/javascript" src="concat/inspector.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<style type="text/css">
    html, body {
        width: 480px;
    }
    #compass {
        position:absolute;
        top:100px;
        left:10px;
        display:block;
        background:url('img/compass.png') top left no-repeat;
        width:300px;
        height:300px;
    }
    #needle {
        position:absolute;
        top:100px;
        left:10px;
        display:block;
        background:url('img/needle.png') top left no-repeat;
        width:300px;
        height:300px;
    }
</style>
</head>
<body>
    <audio>
        <source src="test.mp3" type="audio/mp3">
    </audio>
    <button href="#" onclick="listenOrientation();">Start Compass</button><br/>
    <button href="#" onclick="unlistenOrientation();">Stop Compass</button><br/>
    <div id="console"></div><br/>
    <div id="compass"></div>
    <div id="needle"></div>
    <script type="text/javascript">
    var cons = document.getElementById("console");
    $compass = $('#compass');
    var id = 0;
    listenOrientation = function() {
        inspector.destroyListeners();
        id = inspector.listen(inspector.gadgets.ORIENTATION, {}, function(data) {
            console.log(data[0]);
            cons.innerHTML = data[0];
            if(data[0]) {
                deg = -1 * parseInt(data[0], 10);
                $compass.css({
                    '-webkit-transform': 'rotate(' + deg + 'deg)',
                    '-o-transform': 'rotate(' + deg + 'deg)',
                    '-ms-transform': 'rotate(' + deg + 'deg)',
                    'transform': 'rotate(' + deg + 'deg)'
                });
            }
        }, null);
    }
    unlistenOrientation = function() {
        inspector.unlisten(inspector.gadgets.ORIENTATION, id);
    }
    window.onblur = unlistenOrientation;
    </script>
</body>
</html>
